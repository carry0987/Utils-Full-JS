!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Utils=t()}(this,function(){"use strict";function e(...e){console.error(...e)}function t(e){throw new Error(e)}var n=Object.freeze({__proto__:null,reportError:e,throwError:t});function r(e,t,n){if("string"!=typeof e)return e;let r=document;return null===t&&n?r=n:t&&t instanceof Node&&"querySelector"in t?r=t:n&&n instanceof Node&&"querySelector"in n&&(r=n),"all"===t?r.querySelectorAll(e):r.querySelector(e)}function o(e,t={},n=""){let r=document.createElement(e);for(let e in t)Object.prototype.hasOwnProperty.call(t,e)&&("textContent"===e||"innerText"===e?r.textContent=t[e]:r.setAttribute(e,t[e]));return n&&(r.textContent=n),r}var s=Object.freeze({__proto__:null,addClass:function(e,t){return e.classList.add(t),e},createElem:o,findChild:function(e,t){return e.querySelector(t)},findChilds:function(e,t,n=1/0){const r=[];return function e(o,s){s>n||Array.from(o.children).forEach(n=>{n.matches(t)&&r.push(n),e(n,s+1)})}(e,0),r},findParent:function(e,t){return e.closest(t)},findParents:function(e,t,n=1/0){const r=[];let o=e.parentElement,s=0;for(;o&&s<n;)o.matches(t)&&r.push(o),o=o.parentElement,s++;return r},getElem:r,hasChild:function(e,t){return null!==e.querySelector(t)},hasClass:function(e,t){return e.classList.contains(t)},hasParent:function(e,t,n=1/0,r=!1){let o=e.parentElement,s=0;for(;o&&s<n;){if(o.matches(t))return!r||o;o=o.parentElement,s++}return!!r&&null},insertAfter:function(e,n){if("string"==typeof n){let e=o("div");e.innerHTML=n,(n=e.firstChild)||t("The new node (string) provided did not produce a valid DOM element.")}e.parentNode.insertBefore(n,e.nextSibling)},insertBefore:function(e,n){if("string"==typeof n){let e=o("div");e.innerHTML=n,(n=e.firstChild)||t("The new node (string) provided did not produce a valid DOM element.")}e.parentNode.insertBefore(n,e)},removeClass:function(e,t){return e.classList.remove(t),e},templateToHtml:function(e){let t;t=e instanceof HTMLTemplateElement?e.content.cloneNode(!0):e;const n=document.createElement("div");return n.appendChild(t),n.innerHTML},toggleClass:function(e,t,n){return e.classList.toggle(t,n),e}});let i="utils-style";const a={from:".utils",to:".utils-"};function c(e){return"object"==typeof e&&null!==e&&!p(e)}function l(e){return"function"==typeof e}function u(e){return"string"==typeof e}function f(e){return"number"==typeof e}function d(e){return"boolean"==typeof e}function p(e){return Array.isArray(e)}function h(e){return"number"!=typeof e&&("string"==typeof e&&0===e.length||(!(!p(e)||0!==e.length)||(!(!c(e)||0!==Object.keys(e).length)||!e)))}function m(e,...t){if(!t.length)return e;const n=t.shift();if(n)for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t],o=t;c(r)||p(r)?(e[o]&&"object"==typeof e[o]||(e[o]=p(r)?[]:{}),m(e[o],r)):e[o]=r}return m(e,...t)}function g(e,...t){return t.forEach(t=>{t&&Object.keys(t).forEach(n=>{const r=n;e[r]=t[r]})}),e}function y(e){let t;if(p(e))t=e.map(e=>y(e));else if(c(e)){t={...e};for(let e in t)t.hasOwnProperty(e)&&(t[e]=y(t[e]))}else t=e;return t}function b(e){if(c(e)||p(e)){const t=p(e)?[]:Object.create(Object.getPrototypeOf(e));for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];t[n]=c(r)?b(r):p(r)?[...r]:r}return t}return e}function w(e,t){if(typeof e!=typeof t)return!1;if(null===e||null===t)return e===t;if("object"!=typeof e||"object"!=typeof t||null===e||null===t)return e===t;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every((e,n)=>w(e,t[n]));if(Array.isArray(e)||Array.isArray(t))return!1;if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,r]of e)if(!w(r,t.get(n)))return!1;return!0}if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;const n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);if(n.length!==r.length)return!1;for(const r of n)if(!w(e[r],t[r]))return!1;return!0}function v(e,t){if(typeof e!=typeof t)return!1;if(null===e||null===t)return e===t;if(e===t)return!0;if("object"!=typeof e||"object"!=typeof t)return e===t;const n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);if(n.length!==r.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function S(e){i=e}function E(e,t){a.from=e,a.to=t}function x(e,t=null){t=h(t)?"":t;let n=o("style");n.id=i+t,n.textContent="",document.head.append(n);let r=n.sheet;for(let n in e)e.hasOwnProperty(n)&&j(r,n,C(e[n]),t)}function C(e){let t="";for(let[n,r]of Object.entries(e))n=n.replace(/([A-Z])/g,e=>`-${e[0].toLowerCase()}`),t+=`${n}:${r};`;return t}function j(e,t,n,r=null){r=h(r)?"":r;let o=t.replace(a.from,a.to+r);e.insertRule(o+"{"+n+"}",0)}function O(e=null){const t=h(e)?"":e;let n=r("#"+i+t);n&&n.parentNode&&n.parentNode.removeChild(n)}function L(e=8){let t="";const n="abcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<e;r++){t+=n[Math.floor(36*Math.random())]}return t}function D(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function P(e){try{return new URL(e),!0}catch(e){return!1}}function T(e,t=window.location.href){const n=t.includes("#")?t.substring(t.indexOf("?"),t.indexOf("#")):t.substring(t.indexOf("?")),r=new URLSearchParams(n).get(e);return null===r?null:decodeURIComponent(r)}function R(e=null,t=window.location.href){const n=t.indexOf("#");if(-1===n)return null;const r=t.substring(n+1);if(null===e){const e=r.split("&")[0];return e.includes("=")?null:decodeURIComponent(e)}const o=new URLSearchParams(r).get(e);return null===o?null:decodeURIComponent(o)}function U(e,t,n=!0){let r,o=[];if("object"==typeof e){if(r=e.url,Array.isArray(e.ignore))o=e.ignore.map(e=>e.startsWith("?")||e.startsWith("&")?e.substring(1):e);else if("string"==typeof e.ignore){let t=e.ignore;(t.startsWith("?")||t.startsWith("&"))&&(t=t.substring(1)),o.push(t)}}else r=e;const s=new URL(r);if(null===t)return s.search="",s.toString();let i=s.search.substring(1);const a=i.length>0?i.split("&"):[],c=[],l=[];for(const e of a)o.includes(e)?c.push(e):l.push(e);const u=new URLSearchParams(l.join("&"));for(const[e,r]of Object.entries(t)){const t=null===r?"":String(r);!n&&u.has(e)||u.set(e,t)}const f=c.concat(u.toString().split("&").filter(e=>e)).join("&");return s.search=f?"?"+f:"",s.toString()}function _(e,t=null,n=!0){let r,o=[];if("object"==typeof e){if(r=e.url,Array.isArray(e.ignore))o=e.ignore.map(e=>e.startsWith("#")||e.startsWith("&")?e.substring(1):e);else if("string"==typeof e.ignore){let t=e.ignore;(t.startsWith("#")||t.startsWith("&"))&&(t=t.substring(1)),o.push(t)}}else r=e;const s=new URL(r);if(null===t)return s.hash="",s.toString();if("string"==typeof t){const e=s.hash.substring(1),n=e.length>0?e.split("&"):[],r=[];for(const e of n)o.includes(e)&&r.push(e);const i=r.length>0?[...r,t]:[t];return s.hash="#"+i.join("&"),s.toString()}let i=s.hash.substring(1);const a=i.length>0?i.split("&"):[],c=[],l=[];for(const e of a)o.includes(e)?c.push(e):l.push(e);const u=new URLSearchParams(l.join("&"));for(const[e,r]of Object.entries(t)){const t=null===r?"":String(r);!n&&u.has(e)||u.set(e,t)}const f=c.concat(u.toString().split("&").filter(e=>e)).join("&");return s.hash=f?"#"+f:"",s.toString()}function A(e,t,n){let r=encodeURIComponent(e)+"="+encodeURIComponent(t)+";";if((n=m({},{expires:new Date(Date.now()+864e5),path:"/",secure:!1,sameSite:"Lax"},n||{})).expires){let e="";e=n.expires instanceof Date?n.expires.toUTCString():new Date(String(n.expires)).toUTCString(),r+="expires="+e+";"}r+="path="+n.path+";",n.domain&&(r+="domain="+n.domain+";"),n.secure&&(r+="secure;"),r+="SameSite="+n.sameSite+";",document.cookie=r}var F=Object.freeze({__proto__:null,getCookie:function(e){const t=encodeURIComponent(e)+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let r=n[e];for(;" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}return null},getLocalValue:function(t,n=!0){const r=window.localStorage.getItem(t);if(null===r)return null;if(n)try{return JSON.parse(r)}catch(t){e("Error while parsing stored json value: ",t)}return r},getSessionValue:function(t,n=!0){const r=window.sessionStorage.getItem(t);if(null===r)return null;if(n)try{return JSON.parse(r)}catch(t){e("Error while parsing stored json value: ",t)}return r},removeCookie:function(e){A(e,"",{expires:new Date(0)})},removeLocalValue:function(e){window.localStorage.removeItem(e)},removeSessionValue:function(e){window.sessionStorage.removeItem(e)},setCookie:A,setLocalValue:function(e,t,n=!0){n&&(t=JSON.stringify(t)),window.localStorage.setItem(e,t)},setSessionValue:function(e,t,n=!0){n&&(t=JSON.stringify(t)),window.sessionStorage.setItem(e,t)}});function V(e,t,n){return new CustomEvent(e,{detail:t,...n})}var I=Object.freeze({__proto__:null,addEventListener:function(e,t,n,r){e.addEventListener(t,n,r)},createEvent:V,dispatchEvent:function(n,r=document,o,s){try{if("string"==typeof n){let e=V(n,o,s);return r.dispatchEvent(e)}if(n instanceof Event)return r.dispatchEvent(n);t("Invalid event type")}catch(t){return e("Dispatch Event Error:",t),!1}},removeEventListener:function(e,t,n,r){e.removeEventListener(t,n,r)}});var k=Object.freeze({__proto__:null,debounce:function(e,t,n={leading:!1,trailing:!0}){const{leading:r=!1,trailing:o=!0,maxWait:s}=n;let i,a,c=0,l=0,u=[];const f=()=>{if(!a)throw new Error("Debounce invoked without arguments");const t=e(...a);c=performance.now();const n=[...u];u=[];for(const e of n)e(t);return t};return(...e)=>new Promise(n=>{const d=performance.now(),p=void 0===i;return a=e,u.push(n),p&&(l=d),void 0!==i&&clearTimeout(i),r&&p&&(d-c>t||0===c)||void 0!==s&&d-l>=s?f():void(i=setTimeout(()=>{i=void 0,o&&f()},t))})},throttle:function(e,t=100,n={leading:!1,trailing:!0}){const{leading:r=!1,trailing:o=!0}=n;let s,i,a=r?0:performance.now();const c=()=>{i&&(a=performance.now(),e(...i),i=void 0)};return(...e)=>{const n=performance.now();i=e;const r=n-a;r>=t?(void 0!==s&&(clearTimeout(s),s=void 0),c()):o&&void 0===s&&(s=setTimeout(()=>{c(),s=void 0},t-r))}}});function H(e,t=new FormData){const{data:n,parentKey:r=""}=e;if(n instanceof FormData)n.forEach((e,n)=>{t.append(n,e)});else if(null!==n&&"object"==typeof n)if(n instanceof Blob||n instanceof File){const e=r||"file";t.append(e,n)}else Object.keys(n).forEach(e=>{const o=n[e],s=r?`${r}[${e}]`:e;null!==o&&"object"==typeof o?H({data:o,parentKey:s},t):null!==o&&t.append(s,String(o))});else null!==n&&t.append(r,n);return t}function N(e,t=""){if(e instanceof FormData)return e;return H({data:e,parentKey:t})}function M(e){const t={};return e.forEach((e,n)=>{t[n]="string"==typeof e||"boolean"==typeof e||"number"==typeof e||null===e?e:e.toString()}),t}function z(e){const t={};return e instanceof FormData?M(e):("object"==typeof e&&Object.entries(e).forEach(([e,n])=>{t[e]="string"==typeof n||"number"==typeof n||"boolean"==typeof n||null===n?n:JSON.stringify(n)}),t)}var q=Object.freeze({__proto__:null,appendFormData:H,bodyToURLParams:z,decodeFormData:function(e){const t={};return e.forEach((e,n)=>{n in t?Array.isArray(t[n])?t[n].push(e):t[n]=[t[n],e]:t[n]=e}),t},encodeFormData:N,formDataToURLParams:M});async function W(e){const{url:t,method:n="GET",headers:r={},cache:o="no-cache",mode:s="cors",credentials:i="same-origin",body:a=null,beforeSend:c=null,success:l=null,error:u=null}=e;let f=t;const d={method:n,mode:s,headers:r instanceof Headers?r:new Headers(r),cache:o,credentials:i};if(a&&null!==a&&"GET"===n.toUpperCase()){const e=z(a);f=U("string"==typeof t?t:t.toString(),e,!0)}else if(a&&null!==a&&["PUT","POST","DELETE"].includes(n.toUpperCase())){let e=a;a instanceof FormData||(e=JSON.stringify(a),d.headers instanceof Headers||(d.headers=new Headers(d.headers)),d.headers.append("Content-Type","application/json")),d.body=e}let p;if("string"==typeof f||f instanceof URL)p=new Request(f,d);else{if(!(f instanceof Request))throw new Error("Invalid URL type");p=f}try{const e=await new Promise(e=>{c?.(),e(p)}),t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);if("function"==typeof l){const e=t.clone(),n=await e.json();l?.(n)}return t}catch(e){const t=e instanceof Error?e:new Error(String(e));throw u?.(t),t}}async function B(e){const{url:t,data:n,method:r="POST",headers:o,cache:s,mode:i,credentials:a,success:c,error:l,beforeSend:u,encode:f=!0}=e,d={url:t,method:r,headers:o,cache:s,mode:i,credentials:a,body:f&&"GET"!==r.toUpperCase()?N(n):n,beforeSend:u,success:c,error:l};return(await W(d)).json()}async function K(e){const{url:t,data:n,method:r="POST",headers:o,cache:s,mode:i,credentials:a,success:c,error:l,beforeSend:u}=e;return W({url:t,method:r,headers:o,cache:s,mode:i,credentials:a,body:n?N(n):null,beforeSend:u,success:c,error:l}).then(()=>!0).catch(()=>!1)}const J=B,$=K;var G=Object.freeze({__proto__:null,doFetch:W,fetchData:J,sendData:B,sendForm:$,sendFormData:K});class Z{constructor(e){Object.assign(this,e)}static version="1.7.3";static utilsVersion="3.10.3";static stylesheetId=i;static replaceRule={from:a.from,to:a.to};static setStylesheetId=S;static setReplaceRule=E;static isObject=c;static isArray=p;static isFunction=l;static isString=u;static isNumber=f;static isBoolean=d;static isEmpty=h;static deepMerge=m;static shallowMerge=g;static deepClone=y;static shallowClone=b;static deepEqual=w;static shallowEqual=v;static injectStylesheet=x;static buildRules=C;static compatInsertRule=j;static removeStylesheet=O;static generateRandom=L;static generateUUID=D;static isValidURL=P;static getUrlParam=T;static getHashParam=R;static setUrlParam=U;static setHashParam=_;static getElem=s.getElem;static createElem=s.createElem;static insertAfter=s.insertAfter;static insertBefore=s.insertBefore;static addClass=s.addClass;static removeClass=s.removeClass;static toggleClass=s.toggleClass;static hasClass=s.hasClass;static hasParent=s.hasParent;static findParent=s.findParent;static findParents=s.findParents;static hasChild=s.hasChild;static findChild=s.findChild;static findChilds=s.findChilds;static templateToHtml=s.templateToHtml;static createEvent=I.createEvent;static dispatchEvent=I.dispatchEvent;static addEventListener=I.addEventListener;static removeEventListener=I.removeEventListener;static debounce=k.debounce;static throttle=k.throttle;static setLocalValue=F.setLocalValue;static getLocalValue=F.getLocalValue;static removeLocalValue=F.removeLocalValue;static setSessionValue=F.setSessionValue;static getSessionValue=F.getSessionValue;static removeSessionValue=F.removeSessionValue;static setCookie=F.setCookie;static getCookie=F.getCookie;static removeCookie=F.removeCookie;static doFetch=G.doFetch;static sendData=G.sendData;static sendFormData=G.sendFormData;static fetchData=G.fetchData;static sendForm=G.sendForm;static appendFormData=q.appendFormData;static encodeFormData=q.encodeFormData;static decodeFormData=q.decodeFormData;static formDataToURLParams=q.formDataToURLParams;static bodyToURLParams=q.bodyToURLParams;static reportError=n.reportError;static throwError=n.throwError}return Object.defineProperty(Z,"version",{writable:!1,configurable:!0}),Z});
